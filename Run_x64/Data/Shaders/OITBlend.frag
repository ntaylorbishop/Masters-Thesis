#version 430 core

layout(binding = 0) uniform sampler2D gAccumTex;
layout(binding = 1) uniform sampler2D gRevealageTex;


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//IN OUTS
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------------------------------------------------------------------
in vec2 passUV0;
out vec4 outColor;


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//MAIN
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------------------------------------------------------------------
void main() {

	vec4 accum		= texture2D(gAccumTex, passUV0);
	float reveal	= texture2D(gRevealageTex, passUV0).r;
	 
	// Blend Func: GL_ONE_MINUS_SRC_ALPHA, GL_SRC_ALPHA
	outColor = vec4(accum.rgb / clamp(accum.a, 1e-4, 5e4), reveal);
}